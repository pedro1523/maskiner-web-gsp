<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap
PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
"http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Paquete">
<!-- Definimos algunas operaciones basicas para trabajar sobre la entidad cliente -->

<!-- CREAMOS UN ALIAS PARA LA CLASE CLIENTEDTO -->
<typeAlias alias="paquete" type="com.maskiner.smc.gestionarespertise.bean.PaqueteIbatis" />


	<resultMap 	class="com.maskiner.smc.gestionarespertise.bean.PaqueteIbatis" 	
				id="paqueteResMap"  >
	
		<result property="strCodPaquete" column="cod_paq"  />
		<result property="datFechaRegistroPaquete" column="fec_reg_paq"  />
		<result property="strCodRegistro" column="cod_reg"  />
		<result property="strNombre" column="nom_paq"  />
		<result property="strMarcaMaqApliPaquete" column="cod_maq"  />
		<result property="intCantidadTecPaquete" column="cant_tec_paq"  />
		<result property="intCantidadHoraPaquete" column="cant_hor_paq"  />
		<result property="intIntervaloHorometro" column="interv_horom"  />
		
	</resultMap>	

	<!--  cuando usamos un parameterMap es posible utilizar  
		en la sentencia insert las interrogantes : ?  
	 -->
 
	<parameterMap class="java.util.Map" id="paquetespMap">
		<parameter property="cod_paq" jdbcType="CHAR" mode="IN"  />
		<parameter property="fec_reg_paq" jdbcType="DATE" mode="IN"  />
		<parameter property="cod_reg" jdbcType="CHAR" mode="IN"  />
		<parameter property="nom_paq" jdbcType="VARCHAR" mode="IN" />
		<parameter property="cod_maq" jdbcType="CHAR" mode="IN" />
		<parameter property="cant_tec_paq" jdbcType="INTEGER" mode="IN" />
		<parameter property="cant_hor_paq" jdbcType="INTEGER" mode="IN" />
		<parameter property="interv_horom" jdbcType="INTEGER" mode="IN" />
		
	</parameterMap>



	
	<procedure id="ibatis_spregistraPaquete" 
					parameterMap="paquetespMap"	   >
	
		call pr_insertarPaquete(?,?,?,?,?,?,?,?)
			 	
	
	</procedure>	

<procedure id = "ibatis_listaPorPaquete"
	 parameterClass="paquetespMap"  >
	
		call pr_listaDePaquetes(?,?)
	
	</procedure>

<select id = "ibatis_listaPorPaquete"
	 parameterClass="java.lang.String" 
	 resultClass="paquete" >
	
		  	SELECT p.*,
           m.desc_maq,
           m.mar_maq,
           m.mod_maq
    FROM paquete p inner join maquinaria m
          on p.cod_maq=m.cod_maq
    WHERE p.cod_paq like #value#  and  p.nom_paq like #value#

	
	</select>
	

</sqlMap>